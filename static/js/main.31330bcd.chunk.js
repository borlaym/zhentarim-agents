(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(t,e,n){t.exports=n(24)},20:function(t,e,n){},21:function(t,e,n){},24:function(t,e,n){"use strict";n.r(e);var o=n(0),a=n.n(o),r=n(9),i=n.n(r),s=(n(20),n(1)),u=n(5),c=n(12),h=n(10),l=n(13),f=n(2),m=n(3);n(21);function d(t){for(var e,n,o=Object(s.a)(t),a=o.length;0!==a;)n=Math.floor(Math.random()*a),e=o[a-=1],o[a]=o[n],o[n]=e;return o}var g=n(4),p=n(11),y=n.n(p),v=function(){return O(["I'm not telling you anything. They promised me good coin.","Why would I tell you? Where were YOU when I needed help?","I pledged my life to the Zhentarim. I'm not helping you.","Yeah, they recruited me. Here's a tip free of charge: you smell like an arse.","Get lost! The Zhentarim will take care of me.","I changed my allegiances from the Xanathar to the Zhentarim. But to YOU, I tell nothing.","Leave me be! Maybe I should let my new bosses know someone is looking for them.","I had no choice but to join up with the Zhentarim. Look at me, I haven't eaten in days. It would be wrong to rat them out now.","You are trying to interfere with their plans? I am proudly among their ranks now, so how about I give you a right thrashing instead?"])},w=function(){return O(["Zhentarim? Never heard of them.","I haven't seen any shady people, no, but would you like to dance?","Hic! Tellya the truf I'm farily drunk.","Haven't seen no agent, now leave me be!","An agent? I'm not an agent of Xanathar! Oh, you were asking about the Zhentarim? Haven't seen one, no.","I've been looking at this girl all night, I haven't seen no shady figures, no.","I think I saw one, but he was on the other side of the room."])},k=function(){return O(["This guy next to me is super suspicious!","I just bumped into someone who fits that description!","Psst! He's RIGHT HERE! You would do the Xanathar... ehm, I mean the people, a great service if you killed him!","See that guy behind my shoulders? Super shady!"])},b=function(){return O(["I think I saw a man with a snake tattoo not too far away!","Yeah I saw the guy not long ago. He was quite handsome! Wanted to dance with him but he was caught up in a conversation.","I overheard someone talking about the Zhentarim, trying to recruit into their ranks not far away!","My eyes are not what they used to be, but I think I saw someone that fits that description.","Looking for a Zhent agent? He he. Yeah, you don't have to go far. Slip a dagger between his ribs, would ya, you would spare me the trouble."])},I=function(t){return O(["I saw a suspicious man change from a ".concat(t," mask not too long ago!"),"These woodland creatures are all so cute! Saw a man change his ".concat(t," mask to something else, guess he couldn't choose!"),"When this man changed his ".concat(t," mask, I saw a snake tattoo reveal itself on his head!"),"A Zhent agent changed his ".concat(t," mask into something else not long ago, Quick! Get him!")])},E=function(){return O(["WHAT ARE YOU DOING? I'm calling the city watch!","Get your hands off me! Who do you think you are?","A man can't have some fun without being harassed! I hate this city!","Go back to your hideout you thug!","Damn the Xanathar! Damn the Zhentarim! Damn this whole godforsaken city."])};function O(t){return t[Math.floor(Math.random()*t.length)]}var M=10,j=2,T=.6,S=.5,A=["bear","rabbit","fox"],x=function(){function t(e,n){Object(f.a)(this,t),this.row=void 0,this.col=void 0,this.row=e,this.col=n}return Object(m.a)(t,[{key:"copy",value:function(e,n){return new t(this.row+e,this.col+n)}},{key:"equals",value:function(t){return this.row===t.row&&this.col===t.col}},{key:"distanceTo",value:function(t){return Math.max(Math.abs(t.row-this.row),Math.abs(t.col-this.col))}},{key:"neighboring",value:function(t){var e=this;return t.filter(function(t){return 1===e.distanceTo(t.position)}).length}}]),t}(),Z=function(t){function e(){var t,n;Object(f.a)(this,e);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(c.a)(this,(t=Object(h.a)(e)).call.apply(t,[this].concat(a)))).state={turns:[],selected:void 0,information:[],wrongfulAccusations:0},n.nextTurn=function(){var t=n.state.turns[n.state.turns.length-1],e=[],o=function(t){return Boolean(e.find(function(e){return e.equals(t)}))},a=t.map(function(t){if("agent"!==t.type&&Math.random()<S&&!o(t.position))return e.push(t.position),t;var n=t.position,a=[n.copy(-1,-1),n.copy(-1,0),n.copy(-1,1),n.copy(0,-1),n.copy(0,1),n.copy(1,-1),n.copy(1,0),n.copy(1,1)].filter(function(t){return!t.equals(n)&&t.row>-1&&t.col>-1&&t.row<M&&t.col<M&&!o(t)});if(0===a.length)return e.push(t.position),t;var r=d(a)[0];return e.push(r),Object(u.a)({},t,{position:r,mask:"agent"===t.type?d(A.filter(function(e){return e!==t.mask}))[0]:t.mask})});a.filter(function(t){return"agent"===t.type}).forEach(function(t){var e=a.filter(function(t){return"commoner"===t.type&&!t.converted}).filter(function(e){return 1===t.position.distanceTo(e.position)});e.length>0&&Math.random()<T&&(d(e)[0].converted=!0)}),n.setState({turns:[].concat(Object(s.a)(n.state.turns),[a]),selected:void 0,information:[]})},n.select=function(t){n.setState({selected:t})},n.unmask=function(){if(n.state.selected){if("agent"===n.state.selected.type)return alert("Eeek! I'm compromised!"),n.setState({selected:void 0,turns:[].concat(Object(s.a)(n.state.turns.slice(0,n.state.turns.length-1)),[n.state.turns[n.state.turns.length-1].filter(function(t){return t!==n.state.selected})])});var t=n.state.information.find(function(t){return t.guest===n.state.selected});if(t)return n.setState({information:n.state.information.map(function(e){return e===t?Object(u.a)({},e,{information:E()}):e}),wrongfulAccusations:n.state.wrongfulAccusations+1});n.setState({information:[].concat(Object(s.a)(n.state.information),[{guest:n.state.selected,information:E()}]),wrongfulAccusations:n.state.wrongfulAccusations+1})}},n.investigate=function(){var t=n.state.selected,e=n.state.turns[n.state.turns.length-1];if(t){var o="No info",a=100*Math.random();if("agent"===t.type)o=d([w(),k(),b(),b(),w()])[0];else if(t.converted)o=v();else if(1===n.state.turns.length||a<60){var r=e.filter(function(t){return"agent"===t.type}).map(function(e){return t.position.distanceTo(e.position)}),i=Math.max(Math.min.apply(Math,Object(s.a)(r)),0);o=i>j?w():i<2&&t.position.neighboring(e)>1&&Math.random()<.7?k():b()}else{var u=n.state.turns[n.state.turns.length-2].filter(function(t){return"agent"===t.type}),c=u.map(function(e){return t.position.distanceTo(e.position)}),h=Math.max(Math.min.apply(Math,Object(s.a)(c)),0);if(h>j+1)o=w();else{var l=u[c.indexOf(h)];o=I(l.mask)}}n.setState({information:[].concat(Object(s.a)(n.state.information),[{guest:t,information:o}])})}},n}return Object(l.a)(e,t),Object(m.a)(e,[{key:"componentWillMount",value:function(){this.setState({turns:[this.createInitialState()]})}},{key:"createInitialState",value:function(){for(var t=[],e=[],n=0;n<M;n++)for(var o=0;o<M;o++)e.push(new x(n,o));for(var a=d(e),r=0;r<35;r++){var i=a.pop();if(!i)throw Error();t.push({id:g.v4(),type:"commoner",mask:d(A)[0],converted:!1,position:i})}for(var s=0;s<3;s++){var u=a.pop();if(!u)throw Error();t.push({id:g.v4(),type:"agent",mask:d(A)[0],converted:!1,position:u})}for(var c=0;c<3;c++){var h=d(t.filter(function(t){return!t.converted}))[0];t[t.indexOf(h)].converted=!0}return t}},{key:"buildTable",value:function(){for(var t=[],e=0;e<M;e++){for(var n=[],o=0;o<M;o++)n.push(null);t.push(n)}var a=this.state.turns[this.state.turns.length-1];if(!a)throw Error();return a.forEach(function(e){t[e.position.row][e.position.col]?console.log("error: position duplicate"):t[e.position.row][e.position.col]=e}),t}},{key:"render",value:function(){var t=this,e=this.buildTable(),n=this.state.selected&&this.state.information.find(function(e){return e.guest===t.state.selected}),a=this.state.turns[this.state.turns.length-1];return o.createElement("div",{className:"container"},o.createElement("table",null,o.createElement("tbody",null,e.map(function(e,n){return o.createElement("tr",{key:n},e.map(function(e,n){return o.createElement("td",{key:n,onClick:e?function(){return t.select(e)}:void 0,className:y()({selected:t.state.selected===e,questionedThisRound:t.state.information.find(function(t){return t.guest===e}),converted:e&&e.converted,agent:e&&"agent"===e.type})},e&&o.createElement("img",{src:"".concat(e.mask,".png")}))}))}))),o.createElement("div",{className:"tools"},o.createElement("div",null,this.state.selected&&n?o.createElement("p",{className:"quote"},'"',n.information,'"'):this.state.selected?o.createElement("button",{onClick:this.investigate},"Investigate"):null,this.state.selected&&o.createElement("button",{onClick:this.unmask},"Unmask")),o.createElement("footer",null,o.createElement("p",null,"Zhentarim agents remaining: ",a.filter(function(t){return"agent"===t.type}).length),o.createElement("p",null,"Recruited townsfolk: ",a.filter(function(t){return t.converted}).length),o.createElement("p",null,"Wrongful accusations: ",this.state.wrongfulAccusations),o.createElement("button",{onClick:this.nextTurn},"Next round"))))}}]),e}(o.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement(Z,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[14,1,2]]]);
//# sourceMappingURL=main.31330bcd.chunk.js.map